imports:
  - { resource: services/block_events.yaml }
  - { resource: services/builders.yaml }
  - { resource: services/commands.yaml }
  - { resource: services/controllers.yaml }
  - { resource: services/form_type_extensions.yaml }
  - { resource: services/factories.yaml }
  - { resource: services/handlers.yaml }
  - { resource: services/managers.yaml }
  - { resource: services/mappers.yaml }
  - { resource: services/resolvers.yaml }
  - { resource: services/serialiazers.yaml }
  - { resource: services/subscribers.yaml }
  - { resource: services/twig.yaml }

services:
  nfq_sylius_omnisend_plugin.client.omnisend:
    class: NFQ\SyliusOmnisendPlugin\Client\OmnisendClient
    arguments:
      - '@nfq_sylius_omnisend_plugin.http_client.factory'
      - '@serializer'
      - '@nfq_sylius_omnisend_plugin.client.message_factory'
    calls:
      - ['setLogger', ['@nfq_sylius_omnisend_plugin.client.logger']]

  nfq_sylius_omnisend_plugin.http_client.factory:
    class: NFQ\SyliusOmnisendPlugin\HttpClient\ClientFactory
    arguments:
      - '@sylius.repository.channel'

  nfq_sylius_omnisend_plugin.client.message_factory:
    class: NFQ\SyliusOmnisendPlugin\Client\MessageFactory
    arguments:
      - '@sylius.context.channel.composite'
      - '@serializer'

  nfq_sylius_omnisend_plugin.fixture.channel:
    class: NFQ\SyliusOmnisendPlugin\Fixture\ChannelFixture
    arguments:
      - '@sylius.repository.channel'
    tags: [sylius_fixtures.fixture]
