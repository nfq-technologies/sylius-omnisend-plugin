services:
  _defaults:
    public: true

  nfq_sylius_omnisend.page.shop.test:
    class: Tests\NFQ\SyliusOmnisendPlugin\Behat\Page\Shop\TestPage
    parent: 'sylius.behat.symfony_page'
    public: true

  nfq_sylius_omnisend.page.admin.channel.update:
    class: Tests\NFQ\SyliusOmnisendPlugin\Behat\Page\Admin\Channel\UpdatePage
    parent: 'sylius.behat.page.admin.channel.update'
    public: true

  nfq_sylius_omnisend.context.ui.shop.test:
    class: Tests\NFQ\SyliusOmnisendPlugin\Behat\Context\Ui\Shop\TestContext
    arguments:
      - '@nfq_sylius_omnisend.page.shop.test'

  nfq_sylius_omnisend.context.ui.shop.omnisend_tracking_script:
    class: Tests\NFQ\SyliusOmnisendPlugin\Behat\Context\Ui\Shop\OmnisendTrackingScriptContext
    arguments:
      - '@sylius.behat.page.shop.home'

  nfq_sylius_omnisend.context.ui.shop.customer:
    class: Tests\NFQ\SyliusOmnisendPlugin\Behat\Context\Ui\Shop\CustomerContext
    arguments:
      - '@sylius.repository.customer'

  nfq_sylius_omnisend.context.setup.channel:
    class: Tests\NFQ\SyliusOmnisendPlugin\Behat\Context\Setup\ChannelContext
    arguments:
      - '@sylius.behat.shared_storage'
      - '@sylius.manager.channel'

  nfq_sylius_omnisend.context.ui.admin.managing_channel:
    class: Tests\NFQ\SyliusOmnisendPlugin\Behat\Context\Ui\Admin\ManagingChannelContext
    arguments:
      - '@nfq_sylius_omnisend.page.admin.channel.update'

  nfq_sylius_omnisend.context.ui.admin.managing_taxon:
    class: Tests\NFQ\SyliusOmnisendPlugin\Behat\Context\Ui\Admin\ManagingTaxonContext
    arguments:
      - '@sylius.repository.taxon'
      - '@doctrine.orm.entity_manager'

  nfq_sylius_omnisend.context.ui.admin.managing_product:
    class: Tests\NFQ\SyliusOmnisendPlugin\Behat\Context\Ui\Admin\ManagingProductContext
    arguments:
      - '@sylius.repository.product'
      - '@doctrine.orm.entity_manager'

  nfq_sylius_omnisend.context.hook.doctrine:
    class: Tests\NFQ\SyliusOmnisendPlugin\Behat\Context\Hook\DoctrineORMContext
    arguments:
      - '@doctrine.orm.entity_manager'

  nfq_sylius_omnisend.context.hook.client_request:
    class: Tests\NFQ\SyliusOmnisendPlugin\Behat\Context\Hook\ClientRequestHook
    arguments:
      - '@nfq_sylius_omnisend_plugin.client.loggable'

  nfq_sylius_omnisend_plugin.client.omnisend_decorated:
    class: Tests\NFQ\SyliusOmnisendPlugin\Behat\Mock\OmnisendClientMock
    decorates: nfq_sylius_omnisend_plugin.client.omnisend
    public: false
    arguments:
      - '@nfq_sylius_omnisend_plugin.client.omnisend_decorated.inner'

  nfq_sylius_omnisend_plugin.client.loggable:
    class: Tests\NFQ\SyliusOmnisendPlugin\Behat\Mock\LoggableClientMock
    arguments:
      - '%kernel.cache_dir%'

  nfq_sylius_omnisend_plugin.http_client.factory:
    class: Tests\NFQ\SyliusOmnisendPlugin\Behat\Mock\ClientFactoryMock
    arguments:
      - '@nfq_sylius_omnisend_plugin.client.loggable'

  nfq_sylius_omnisend.context.ui.shop.cart:
    class: Tests\NFQ\SyliusOmnisendPlugin\Behat\Context\Ui\Shop\CartContext
    arguments:
      - '@sylius.repository.order'
      - '@doctrine.orm.entity_manager'

  nfq_sylius_omnisend.context.ui.shop.omnisend_user:
    class: Tests\NFQ\SyliusOmnisendPlugin\Behat\Context\Ui\Shop\OmnisendUserContext

  nfq_sylius_omnisend.context.client_request:
    class: Tests\NFQ\SyliusOmnisendPlugin\Behat\Context\ClientRequestContext
    arguments:
      - '@nfq_sylius_omnisend_plugin.client.loggable'
